<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda de Ropa â€” CRUD DWEC</title>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         LIBRERÃA EXTERNA: SweetAlert2 (alertas bonitas)
         â†’ Se valora usar librerÃ­as en el examen
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           VARIABLES CSS (para modo oscuro)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        :root {
            --bg-principal: #f0f2f5;
            --bg-tarjeta: #ffffff;
            --texto: #333333;
            --texto-secundario: #555555;
            --borde: #dddddd;
            --hover-fila: #f8f9fa;
            --cabecera-tabla: #2c3e50;
            --sombra: rgba(0,0,0,0.08);
        }

        /* â”€â”€ Modo oscuro â”€â”€ */
        body.oscuro {
            --bg-principal: #1a1a2e;
            --bg-tarjeta: #16213e;
            --texto: #e0e0e0;
            --texto-secundario: #b0b0b0;
            --borde: #334155;
            --hover-fila: #1e2d4a;
            --cabecera-tabla: #0f3460;
            --sombra: rgba(0,0,0,0.3);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESET Y BASE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: var(--bg-principal);
            color: var(--texto);
            padding: 20px;
            transition: background 0.3s, color 0.3s;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CABECERA CON TÃTULO Y CONTROLES
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .cabecera {
            text-align: center;
            margin-bottom: 25px;
        }

        .cabecera h1 {
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .controles-globales {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn-control {
            padding: 8px 16px;
            border: 2px solid var(--borde);
            border-radius: 8px;
            background: var(--bg-tarjeta);
            color: var(--texto);
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-control:hover { opacity: 0.8; transform: scale(0.97); }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LAYOUT 2 COLUMNAS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .contenedor {
            max-width: 1250px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 380px 1fr;
            gap: 25px;
            align-items: start;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TARJETAS (formulario, tabla, estadÃ­sticas)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .tarjeta {
            background: var(--bg-tarjeta);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px var(--sombra);
            transition: background 0.3s;
        }

        .tarjeta h2 {
            margin-bottom: 18px;
            font-size: 1.15em;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--borde);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORMULARIO
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .grupo {
            margin-bottom: 14px;
        }

        .grupo label {
            display: block;
            margin-bottom: 4px;
            font-weight: 600;
            font-size: 0.87em;
            color: var(--texto-secundario);
        }

        .grupo input, .grupo select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid var(--borde);
            border-radius: 8px;
            font-size: 0.95em;
            background: var(--bg-principal);
            color: var(--texto);
            transition: border-color 0.3s;
        }

        .grupo input:focus, .grupo select:focus {
            outline: none;
            border-color: #3498db;
        }

        .grupo input.invalido, .grupo select.invalido {
            border-color: #e74c3c;
            background: rgba(231, 76, 60, 0.05);
        }

        .error-campo {
            color: #e74c3c;
            font-size: 0.78em;
            margin-top: 3px;
            min-height: 16px;
        }

        .botones {
            display: flex;
            gap: 10px;
            margin-top: 18px;
        }

        .btn {
            flex: 1;
            padding: 11px;
            border: none;
            border-radius: 8px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s, transform 0.1s;
        }
        .btn:hover { opacity: 0.85; }
        .btn:active { transform: scale(0.97); }
        .btn-guardar  { background: #27ae60; color: #fff; }
        .btn-cancelar { background: #95a5a6; color: #fff; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MENSAJE GLOBAL
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #mensaje {
            margin-top: 12px;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.87em;
            display: none;
        }
        #mensaje.msg-ok    { display: block; background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        #mensaje.msg-error { display: block; background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           COLUMNA DERECHA (tabla + estadÃ­sticas)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .columna-derecha {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BARRA DE BÃšSQUEDA Y FILTROS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .barra-herramientas {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .barra-herramientas input,
        .barra-herramientas select {
            padding: 8px 12px;
            border: 2px solid var(--borde);
            border-radius: 8px;
            font-size: 0.9em;
            background: var(--bg-principal);
            color: var(--texto);
        }

        .barra-herramientas input { flex: 1; min-width: 150px; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TABLA
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .tabla-scroll { overflow-x: auto; }

        table { width: 100%; border-collapse: collapse; min-width: 650px; }

        thead th {
            background: var(--cabecera-tabla);
            color: #fff;
            padding: 12px 8px;
            text-align: left;
            font-size: 0.8em;
            text-transform: uppercase;
            cursor: pointer;
            user-select: none;
            transition: background 0.2s;
        }
        thead th:hover { background: #1a5276; }
        thead th .flecha { margin-left: 4px; font-size: 0.75em; }

        tbody td {
            padding: 10px 8px;
            border-bottom: 1px solid var(--borde);
            font-size: 0.88em;
        }
        tbody tr:hover { background: var(--hover-fila); }
        tbody tr { transition: background 0.2s; }

        .btn-tabla {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.78em;
            font-weight: 600;
            margin: 2px;
            transition: opacity 0.2s;
        }
        .btn-tabla:hover { opacity: 0.75; }
        .btn-editar   { background: #f39c12; color: #fff; }
        .btn-eliminar { background: #e74c3c; color: #fff; }

        .estado-tabla {
            text-align: center;
            padding: 30px;
            color: var(--texto-secundario);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TARJETA DE ESTADÃSTICAS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 12px;
        }

        .stat-item {
            background: var(--bg-principal);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-valor {
            font-size: 1.6em;
            font-weight: 700;
            color: #3498db;
        }

        .stat-label {
            font-size: 0.78em;
            color: var(--texto-secundario);
            margin-top: 4px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONTADOR DE RESULTADOS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .contador {
            font-size: 0.85em;
            color: var(--texto-secundario);
            margin-bottom: 10px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSIVE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 900px) {
            .contenedor { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         CABECERA: TÃ­tulo + Controles globales
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="cabecera">
        <h1>ğŸ›ï¸ Tienda de Ropa â€” GestiÃ³n de Productos</h1>
        <div class="controles-globales">
            <button class="btn-control" id="btnModoOscuro">ğŸŒ™ Modo Oscuro</button>
            <button class="btn-control" id="btnExportarJSON">ğŸ“¥ Exportar JSON</button>
            <button class="btn-control" id="btnExportarCSV">ğŸ“¥ Exportar CSV</button>
        </div>
    </div>

    <div class="contenedor">

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             COLUMNA IZQUIERDA: FORMULARIO
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="tarjeta">
            <h2 id="tituloForm">â• Nuevo Producto</h2>

            <form id="formProducto" novalidate>
                <input type="hidden" id="productoId">

                <div class="grupo">
                    <label for="codigo">CÃ³digo (9 dÃ­gitos)</label>
                    <input type="text" id="codigo" maxlength="9" placeholder="Ej: 123456789">
                    <div class="error-campo" id="errCodigo"></div>
                </div>

                <div class="grupo">
                    <label for="nombre">Nombre del producto</label>
                    <input type="text" id="nombre" maxlength="100" placeholder="Ej: Camiseta BÃ¡sica">
                    <div class="error-campo" id="errNombre"></div>
                </div>

                <div class="grupo">
                    <label for="talla">Talla</label>
                    <select id="talla">
                        <option value="">-- Seleccionar --</option>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                    </select>
                    <div class="error-campo" id="errTalla"></div>
                </div>

                <div class="grupo">
                    <label for="precio">Precio (â‚¬)</label>
                    <input type="number" id="precio" step="0.01" min="0.01" placeholder="Ej: 19.99">
                    <div class="error-campo" id="errPrecio"></div>
                </div>

                <div class="grupo">
                    <label for="email_creador">Email del creador</label>
                    <input type="email" id="email_creador" placeholder="Ej: user@correo.com">
                    <div class="error-campo" id="errEmail"></div>
                </div>

                <div class="botones">
                    <button type="submit" class="btn btn-guardar" id="btnGuardar">ğŸ’¾ Guardar</button>
                    <button type="button" class="btn btn-cancelar" id="btnCancelar">âœ– Cancelar</button>
                </div>
            </form>

            <div id="mensaje"></div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             COLUMNA DERECHA: TABLA + ESTADÃSTICAS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="columna-derecha">

            <!-- TABLA DE PRODUCTOS -->
            <div class="tarjeta">
                <h2>ğŸ“‹ Lista de Productos</h2>

                <!-- Barra de bÃºsqueda y filtro -->
                <div class="barra-herramientas">
                    <input type="text" id="inputBusqueda" placeholder="ğŸ” Buscar por nombre o cÃ³digo...">
                    <select id="filtroTalla">
                        <option value="">Todas las tallas</option>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                    </select>
                </div>

                <div class="contador" id="contador"></div>

                <div class="tabla-scroll">
                    <table>
                        <thead>
                            <tr>
                                <th data-campo="id">ID <span class="flecha"></span></th>
                                <th data-campo="codigo">CÃ³digo <span class="flecha"></span></th>
                                <th data-campo="nombre">Nombre <span class="flecha"></span></th>
                                <th data-campo="talla">Talla <span class="flecha"></span></th>
                                <th data-campo="precio">Precio <span class="flecha"></span></th>
                                <th data-campo="email_creador">Email <span class="flecha"></span></th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="cuerpoTabla">
                            <tr><td colspan="7" class="estado-tabla">Cargando...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ESTADÃSTICAS -->
            <div class="tarjeta">
                <h2>ğŸ“Š EstadÃ­sticas</h2>
                <div class="stats-grid" id="stats">
                    <div class="stat-item">
                        <div class="stat-valor" id="statTotal">0</div>
                        <div class="stat-label">Total productos</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-valor" id="statPrecioMedio">0 â‚¬</div>
                        <div class="stat-label">Precio medio</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-valor" id="statPrecioMax">0 â‚¬</div>
                        <div class="stat-label">Precio mÃ¡ximo</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-valor" id="statPrecioMin">0 â‚¬</div>
                        <div class="stat-label">Precio mÃ­nimo</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-valor" id="statTallaModa">-</div>
                        <div class="stat-label">Talla mÃ¡s comÃºn</div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>