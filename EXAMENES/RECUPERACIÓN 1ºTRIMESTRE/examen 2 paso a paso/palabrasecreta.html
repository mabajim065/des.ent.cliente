<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 1 - Arreglado</title>
</head>
<body>

    <h1>Ejercicio 1: Adivina la Palabra</h1>
    
    <div id="contenedor">
        <p>Intenta adivinar la contraseña secreta. Cada vez que falles, te daré una letra más.</p>
        
        <input type="text" id="inputUsuario" placeholder="Escribe tu respuesta aquí">
        <button onclick="comprobar()">Comprobar</button>

        <br><br>
        
        <div id="mensajeEstado" style="font-weight: bold; color: blue;"></div>
        <div id="pistaVisual" style="color: red; margin-top: 10px;"></div>
    </div>

    <script>
        // ==========================================
        // 1. VARIABLES GLOBALES (ESTADO DEL JUEGO)
        // ==========================================
        
        // La palabra que hay que adivinar
        const CONTRASENA = "EXAMENDEMARIA";
        
        // Contador de intentos. 
        // IMPORTANTE: Está FUERA de la función. Si lo pones dentro, 
        // se reiniciaría a 0 cada vez que haces clic en el botón.
        let intentosRealizados = 0; 

        // ==========================================
        // 2. FUNCIÓN PRINCIPAL
        // ==========================================
        function comprobar() {
            
            // --- A. OBTENER DATOS DEL HTML ---
            const inputElement = document.getElementById("inputUsuario");
            const mensajeDiv = document.getElementById("mensajeEstado");
            const pistaDiv = document.getElementById("pistaVisual");
            
            // Cogemos el valor y lo pasamos a MAYÚSCULAS directamente para comparar bien.
            // (Así da igual si el usuario escribe "Examen" o "examen")
            let respuestaUsuario = inputElement.value.toUpperCase().trim(); // .trim() quita espacios extra

            // --- B. VALIDACIÓN BÁSICA ---
            if (respuestaUsuario === "") {
                mensajeDiv.innerText = "Por favor, escribe algo antes de comprobar.";
                return; // Paramos la función aquí
            }

            // --- C. COMPROBAR SI HA GANADO ---
            if (respuestaUsuario === CONTRASENA) {
                mensajeDiv.style.color = "green";
                mensajeDiv.innerText = "¡FELICIDADES! Has acertado la palabra secreta: " + CONTRASENA;
                pistaDiv.innerText = ""; // Borramos la pista si ya ganó
                return; // Terminamos
            }

            // --- D. SI HA FALLADO (LÓGICA DE PISTAS) ---
            
            // 1. Aumentamos el contador de fallos
            intentosRealizados = intentosRealizados + 1;

            // 2. Mensaje de error
            mensajeDiv.style.color = "red";
            mensajeDiv.innerText = "Incorrecto. Intento número: " + intentosRealizados;

            // 3. Generar la PISTA (Sustituye a tu if/else gigante)
            // La función .substring(0, X) corta la palabra desde el inicio hasta la letra X.
            // Si llevamos 3 intentos, mostrará las 3 primeras letras.
            
            // Un pequeño control para no romper el código si supera la longitud de la palabra
            let longitudPista = intentosRealizados;
            if (longitudPista > CONTRASENA.length) {
                longitudPista = CONTRASENA.length;
            }

            let pistaTexto = CONTRASENA.substring(0, longitudPista);

            // 4. Mostrar la pista en pantalla (No usamos print(), usamos innerText)
            pistaDiv.innerText = "PISTA ACTUAL: " + pistaTexto;
        }
    </script>
</body>
</html>